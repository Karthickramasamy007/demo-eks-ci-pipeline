//Hi Karthick. This is working code.
//Add some more functions like when, parallel, etc. Reffere documentation.

pipeline {   
    agent any
    
    triggers {
      pollSCM('*/5 * * * 1-5')
  }
    options {
      skipDefaultCheckout(true)
      // Keep the 10 most recent builds.
      buildDiscarder(logRotator(numToKeepStr: '10'))
      timestamps()
  }
    environment {
      PATH="/var/lib/jenkins/miniconda3/bin:$PATH"
      registry = "Karthickramasamy007/PROJECTS"
      registryCredentials = "docker_credentials"
      dockerImage = ""
      DOCKERHUB_CREDENTIALS= credentials('dockerhubcredentials')     
      
  }
  
   
    stages {         
      stage("Git Checkout"){           
        steps{                
         
            //git credentialsId: 'github', url: 'https://github.com/Karthickramasamy007/demo-cicd-project.git'                 
            echo 'Git Checkout Completed'
            sh 'ls'
            sh 'pwd'
        }        
      }
      stage('List Configmaps') {
        steps{
          withKubeConfig([namespace: "jenkins"]) {
            sh 'kubectl get pods -n jenkins'
          }
        }
      }
        
      stage('Build Docker Image') {         
        steps{                
            
                echo 'Build Image Completed'                
        }           
      }
      stage('Login to Docker Hub') {         
        steps{                            
            
            echo 'Login Completed'                
        }           
      }               
      stage('Push Image to Docker Hub') {         
        steps{                            
                        
                echo 'Push Image Completed'       
        }           
      }      
    } //stages 
    post{
      always {  
        echo 'docker logout'           
      }
      failure {
          echo "Send e-mail, when failed"
      }      
    } 
  }
  